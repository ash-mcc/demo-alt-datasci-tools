schema: '2.0'
stages:
  prep:
    cmd: clj -M:std:jni src/clj/prep.clj data/iris.csv src/py/params.py data/label-lookup.json
      data/train.arrow data/test.arrow
    deps:
    - path: data/iris.csv
      md5: 57fce90c81521889c736445f058c4838
      size: 3716
    - path: src/clj/prep.clj
      md5: 3f407898a786a3b800b2306b46790c55
      size: 2481
    - path: src/py/params.py
      md5: e7e979547bb6e61def364ada61cfefb4
      size: 286
    outs:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/test.arrow
      md5: 4f36caabc04519de74e962ac5fb4c8a5
      size: 3970
    - path: data/train.arrow
      md5: d994f4bbf93bef8f7692f02f9ebf7681
      size: 6010
  train:
    cmd: python3 src/py/train.py data/train.arrow src/py/params.py data/model.pkl
    deps:
    - path: data/train.arrow
      md5: d994f4bbf93bef8f7692f02f9ebf7681
      size: 6010
    - path: src/py/train.py
      md5: 074fa307c108a4146ea0a411ab7d6c36
      size: 1251
    params:
      src/py/params.py:
        random_forest:
          n_estimators: 100
          criterion: gini
          max_features: sqrt
          n_jobs: -1
          random_state: 42
          verbose: 1
    outs:
    - path: data/model.pkl
      md5: f57eecbdedfdb6879ad65bef724f3c09
      size: 158874
  evaluate:
    cmd: python3 src/py/evaluate.py data/model.pkl data/label-lookup.json data/test.arrow
      metrics.json dvclive feat-importance.png confusion_matrix
    deps:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/model.pkl
      md5: f57eecbdedfdb6879ad65bef724f3c09
      size: 158874
    - path: data/test.arrow
      md5: 4f36caabc04519de74e962ac5fb4c8a5
      size: 3970
    - path: src/py/evaluate.py
      md5: efda449a8e1e339425427181f644ddab
      size: 3282
    outs:
    - path: dvclive/plots/images/feat-importance.png
      md5: 18c7ee0c5c9174b96f82449572f79454
      size: 15006
    - path: dvclive/plots/sklearn/confusion_matrix.json
      md5: 0020fd00eddaa621e820258b809d1254
      size: 3768
    - path: metrics.json
      md5: 3eb380ec97e9fcfd527fb018ff4b8886
      size: 62
  predict:
    cmd: clj -M:std:jni src/clj/predict.clj data/model.pkl data/label-lookup.json  data/predictions.csv
    deps:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/model.pkl
      md5: f57eecbdedfdb6879ad65bef724f3c09
      size: 158874
    - path: src/clj/predict.clj
      md5: 03b4f566fe47c1d4f1ea4bdb03d2bcd7
      size: 3982
    outs:
    - path: data/predictions.csv
      md5: 4937ca4881a901072bebb7e978ef1aa3
      size: 272
